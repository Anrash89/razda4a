<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Cashback App</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes scaleIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }
        @keyframes bounce-short { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-6px); } }
        @keyframes pulse-slow { 0%, 100% { opacity: 1; } 50% { opacity: .5; } }
        
        .animate-fadeIn { animation: fadeIn 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        .animate-slideUp { animation: slideUp 0.7s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        .animate-scaleIn { animation: scaleIn 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        .animate-bounce-short { animation: bounce-short 1.5s ease-in-out infinite; }
        .animate-pulse-slow { animation: pulse-slow 3s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        
        body { -webkit-tap-highlight-color: transparent; }
        .pb-safe { padding-bottom: env(safe-area-inset-bottom); }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 antialiased">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- –ò–ö–û–ù–ö–ò (SVG –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã) ---
        const IconBase = ({ children, className, ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} {...props}>{children}</svg>
        );
        const Home = (p) => <IconBase {...p}><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></IconBase>;
        const ShoppingBag = (p) => <IconBase {...p}><path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"/><path d="M3 6h18"/><path d="M16 10a4 4 0 0 1-8 0"/></IconBase>;
        const User = (p) => <IconBase {...p}><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></IconBase>;
        const Camera = (p) => <IconBase {...p}><path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"/><circle cx="12" cy="13" r="3"/></IconBase>;
        const Upload = (p) => <IconBase {...p}><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" x2="12" y1="3" y2="15"/></IconBase>;
        const CheckCircle = (p) => <IconBase {...p}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></IconBase>;
        const ChevronRight = (p) => <IconBase {...p}><path d="m9 18 6-6-6-6"/></IconBase>;
        const ChevronLeft = (p) => <IconBase {...p}><path d="m15 18-6-6 6-6"/></IconBase>;
        const Search = (p) => <IconBase {...p}><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></IconBase>;
        const MapPin = (p) => <IconBase {...p}><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></IconBase>;
        const FileText = (p) => <IconBase {...p}><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="16" x2="8" y1="13" y2="13"/><line x1="16" x2="8" y1="17" y2="17"/><line x1="10" x2="8" y1="9" y2="9"/></IconBase>;
        const Star = (p) => <IconBase {...p}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></IconBase>;
        const DollarSign = (p) => <IconBase {...p}><line x1="12" x2="12" y1="2" y2="22"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></IconBase>;
        const Copy = (p) => <IconBase {...p}><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></IconBase>;
        const Info = (p) => <IconBase {...p}><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></IconBase>;
        const Loader = (p) => <IconBase {...p}><path d="M21 12a9 9 0 1 1-6.219-8.56"/></IconBase>;
        const Clock = (p) => <IconBase {...p}><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></IconBase>;
        const CreditCard = (p) => <IconBase {...p}><rect width="20" height="14" x="2" y="5" rx="2"/><line x1="2" x2="22" y1="10" y2="10"/></IconBase>;
        const AlertTriangle = (p) => <IconBase {...p}><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><line x1="12" x2="12" y1="9" y2="13"/><line x1="12" x2="12.01" y1="17" y2="17"/></IconBase>;
        const ShieldCheck = (p) => <IconBase {...p}><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"/><path d="m9 12 2 2 4-4"/></IconBase>;
        const Gift = (p) => <IconBase {...p}><rect x="3" y="8" width="18" height="4" rx="1"/><path d="M12 8v13"/><path d="M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7"/><path d="M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5"/></IconBase>;

        // --- –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø –ò –î–ê–ù–ù–´–ï ---
        const WARNING_MSG = "‚ö†Ô∏è –í–ê–ñ–ù–û: –ú—ã –ù–ï –ø–µ—Ä–µ–≤–æ–¥–∏–º –¥–µ–Ω—å–≥–∏ –Ω–∞ –∫–∞—Ä—Ç—É. –í–æ–∑–≤—Ä–∞—Ç —á–µ—Ä–µ–∑ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç WB –Ω–∞ 15-–π –¥–µ–Ω—å.";
        const POLICY_TEXT = "**–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏...** (–¢–µ–∫—Å—Ç –ø–æ–ª–∏—Ç–∏–∫–∏ –∏–∑ –±–æ—Ç–∞)";

        const PRODUCTS = [
          {
            id: "chem_roman",
            name: "üß™ –ù–∞–±–æ—Ä –æ–ø—ã—Ç–æ–≤ Roman magic",
            price: "–ë–µ—Å–ø–ª–∞—Ç–Ω–æ",
            cashback: "100%",
            image: "https://sun9-86.userapi.com/s/v1/ig2/IhwjtFEX3Akdh-mSI-oGaJZIbMo9dJm3rVNJ7VGTHulPq2pAbkO93_6Zc-M_-pXKl2p4Voe73OmnneabPuquElq2.jpg?quality=95&as=32x17,48x26,72x38,108x57,160x85,240x128,360x192,480x255,540x287,640x340,720x383,1080x575,1280x681&from=bu&cs=1280x0",
            keyword: "–æ–ø—ã—Ç—ã –¥–ª—è –¥–µ—Ç–µ–π",
            brand: "–î–µ–ª–æ –≤ —à–ª—è–ø–µ",
            description: "–ü–æ–ª–∏—Å—Ç–∞–π—Ç–µ –æ—Ç–∑—ã–≤—ã 2 –º–∏–Ω—É—Ç—ã, –¥–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ—Ä–∑–∏–Ω—É –Ω–∞—à —Ç–æ–≤–∞—Ä + 3-4 –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞",
            action: "–ü–æ–ª–∏—Å—Ç–∞–π—Ç–µ –æ—Ç–∑—ã–≤—ã 2 –º–∏–Ω—É—Ç—ã, –¥–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ—Ä–∑–∏–Ω—É –Ω–∞—à —Ç–æ–≤–∞—Ä\n   - –î–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ—Ä–∑–∏–Ω—É 3-4 –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞"
          },
          {
            id: "chem_kids",
            name: "‚öóÔ∏è –ù–∞–±–æ—Ä –æ–ø—ã—Ç–æ–≤ –¥–ª—è –¥–µ—Ç–µ–π",
            price: "–ë–µ—Å–ø–ª–∞—Ç–Ω–æ",
            cashback: "100%",
            image: "https://sun9-59.userapi.com/s/v1/ig2/_ce74GT4PlLOVpPGwYrw0gyVfzoezNMurjgJkUzsxdSZxe33hi9cV3L0_Rn_LNIww2S6bU6SGTbWRWfQx5X1uJIR.jpg?quality=95&as=32x17,48x25,72x38,108x57,160x84,240x126,360x189,480x252,540x283,640x336,720x378,1080x567,1280x672&from=bu&cs=1280x0",
            keyword: "–æ–ø—ã—Ç—ã –¥–ª—è –¥–µ—Ç–µ–π",
            brand: "–î–µ–ª–æ –≤ –®–ª—è–ø–µ",
            description: "–ü–æ–ª–∏—Å—Ç–∞–π—Ç–µ –æ—Ç–∑—ã–≤—ã 2 –º–∏–Ω—É—Ç—ã, –¥–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ—Ä–∑–∏–Ω—É –Ω–∞—à —Ç–æ–≤–∞—Ä + 3-4 –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞",
            action: "–ü–æ–ª–∏—Å—Ç–∞–π—Ç–µ –æ—Ç–∑—ã–≤—ã 2 –º–∏–Ω—É—Ç—ã, –¥–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ—Ä–∑–∏–Ω—É –Ω–∞—à —Ç–æ–≤–∞—Ä\n   - –î–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ—Ä–∑–∏–Ω—É 3-4 –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞"
          },
          {
            id: "chem_kids_1_0",
            name: "üß¨ –ù–∞–±–æ—Ä –æ–ø—ã—Ç–æ–≤ 1.0",
            price: "–ë–µ—Å–ø–ª–∞—Ç–Ω–æ",
            cashback: "100%",
            image: "https://sun9-17.userapi.com/s/v1/ig2/8JsVfZoGzGapl6C251SafXQhQ6JGgWNv-yFAZBw1sHvisgMYsnzBNFwVbTq6WWPkw3xd0UMbMPQ_WtC2JD_WXreW.jpg?quality=95&as=32x18,48x27,72x40,108x60,160x89,240x133,360x199,480x266,540x299,640x354,720x398,1080x598,1280x708,1440x797,1547x856&from=bu&cs=1547x0",
            keyword: "–Ω–∞–±–æ—Ä –æ–ø—ã—Ç–æ–≤ –¥–ª—è –¥–µ—Ç–µ–π",
            brand: "–î–µ–ª–æ –≤ –®–ª—è–ø–µ",
            description: "–ü–æ–ª–∏—Å—Ç–∞–π—Ç–µ –æ—Ç–∑—ã–≤—ã 2 –º–∏–Ω—É—Ç—ã, –¥–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ—Ä–∑–∏–Ω—É –Ω–∞—à —Ç–æ–≤–∞—Ä + 3-4 –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞",
            action: "–ü–æ–ª–∏—Å—Ç–∞–π—Ç–µ –æ—Ç–∑—ã–≤—ã 2 –º–∏–Ω—É—Ç—ã, –¥–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ—Ä–∑–∏–Ω—É –Ω–∞—à —Ç–æ–≤–∞—Ä\n   - –î–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ—Ä–∑–∏–Ω—É 3-4 –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞"
          }
        ];

        const MAIN_BTN_CLASS = "w-full bg-gradient-to-r from-violet-600 to-indigo-600 text-white py-4 rounded-2xl font-bold shadow-xl shadow-indigo-200 active:scale-95 transition-all duration-300 flex items-center justify-center text-base mt-6 hover:shadow-2xl hover:-translate-y-1 disabled:opacity-70 disabled:cursor-not-allowed disabled:transform-none";

        const copyToClipboard = (text) => {
          try {
            if (navigator && navigator.clipboard) {
              navigator.clipboard.writeText(text);
            } else {
              const textArea = document.createElement("textarea");
              textArea.value = text;
              document.body.appendChild(textArea);
              textArea.select();
              document.execCommand("copy");
              document.body.removeChild(textArea);
            }
          } catch (err) {
            console.error("Failed to copy", err);
          }
        };

        // --- –ö–û–ú–ü–û–ù–ï–ù–¢–´ ---

        const FileUploader = ({ label, onUpload, isLoading, icon: Icon = Camera }) => {
          const [preview, setPreview] = useState(null);

          const handleChange = (e) => {
            const file = e.target.files[0];
            if (file) {
              setPreview(URL.createObjectURL(file));
              onUpload(file);
            }
          };

          return (
            <label className={`
              relative w-full h-40 border-2 border-dashed rounded-3xl flex flex-col items-center justify-center cursor-pointer transition-all duration-300 overflow-hidden group
              ${preview ? 'border-violet-400 bg-violet-50' : 'border-indigo-100 hover:border-violet-300 bg-slate-50 hover:bg-white'}
            `}>
              {preview ? (
                <>
                  <img src={preview} alt="Preview" className="absolute inset-0 w-full h-full object-cover opacity-90 group-hover:scale-105 transition-transform duration-700" />
                  <div className="absolute inset-0 bg-violet-900/10 backdrop-blur-[2px]" />
                  <div className="absolute inset-0 flex items-center justify-center z-10">
                    <div className="bg-white/90 backdrop-blur-md px-5 py-2.5 rounded-full shadow-lg text-sm font-bold text-violet-600 flex items-center animate-bounce-short border border-white/50">
                      <CheckCircle className="w-4 h-4 mr-2" /> –ì–æ—Ç–æ–≤–æ
                    </div>
                  </div>
                </>
              ) : (
                <div className="flex flex-col items-center p-4 text-center z-10">
                  <div className="bg-white p-4 rounded-full shadow-lg shadow-indigo-100/50 mb-3 group-hover:scale-110 transition-transform duration-300 text-indigo-500">
                    <Icon className="w-7 h-7" strokeWidth={1.5} />
                  </div>
                  <span className="text-sm text-slate-500 font-medium group-hover:text-violet-600 transition-colors">{label}</span>
                  <span className="text-xs text-slate-300 mt-1">–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞</span>
                </div>
              )}
              <input type="file" className="hidden" onChange={handleChange} accept="image/*" disabled={isLoading} />
            </label>
          );
        };

        const ProductCard = ({ product, onSelect }) => (
          <div 
            className="bg-white/80 backdrop-blur-sm p-4 rounded-[32px] shadow-[0_8px_30px_rgb(0,0,0,0.04)] mb-5 flex gap-5 active:scale-95 transition-all duration-300 border border-white/50 hover:border-indigo-100 hover:shadow-[0_8px_30px_rgb(99,102,241,0.15)] cursor-pointer group" 
            onClick={() => onSelect(product)}
          >
            <div className="relative w-28 h-28 flex-shrink-0">
              <img src={product.image} alt={product.name} className="w-full h-full object-cover rounded-[24px] bg-slate-100 shadow-inner" />
              <div className="absolute bottom-2 left-2 right-2 bg-white/90 backdrop-blur-md text-slate-800 text-[10px] font-bold px-2 py-1.5 rounded-xl text-center shadow-sm border border-white/50">
                {product.brand}
              </div>
            </div>
            <div className="flex flex-col flex-grow py-1 pr-1">
              <div className="flex justify-between items-start">
                <h3 className="font-bold text-slate-800 leading-tight line-clamp-2 mb-1 text-[16px] group-hover:text-violet-700 transition-colors">{product.name}</h3>
              </div>
              <p className="text-xs text-slate-400 line-clamp-2 mb-auto font-medium">{product.description}</p>
              
              <div className="flex items-center justify-between mt-3">
                <div className="flex flex-col">
                    <span className="text-[10px] text-slate-400 font-bold uppercase tracking-wide">–¶–µ–Ω–∞</span>
                    <span className="text-sm font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-violet-600 to-fuchsia-600">–ë–µ—Å–ø–ª–∞—Ç–Ω–æ</span>
                </div>
                <button className="bg-slate-900 text-white px-5 py-3 rounded-2xl text-xs font-bold shadow-lg shadow-slate-200 transition-all group-hover:bg-violet-600 group-hover:shadow-violet-200 group-hover:scale-105">
                  –ó–∞–±—Ä–∞—Ç—å
                </button>
              </div>
            </div>
          </div>
        );

        const StepIndicator = ({ currentStep }) => {
          const steps = [
            { id: 'SEARCHING', icon: Search, label: '–ü–æ–∏—Å–∫' },
            { id: 'WAITING_PICKUP', icon: MapPin, label: '–ü–í–ó' },
            { id: 'DRAFT_MODE', icon: FileText, label: '–û—Ç–∑—ã–≤' },
            { id: 'PAYMENT_DATA', icon: CreditCard, label: '–í—ã–ø–ª–∞—Ç–∞' }
          ];

          const currentIndex = steps.findIndex(s => s.id === currentStep);
          const progressPercent = currentStep === 'COMPLETED' ? 100 : (currentIndex >= 0 ? (currentIndex / (steps.length - 1)) * 100 : 0);

          return (
            <div className="flex justify-between items-center px-4 mb-10 relative">
              <div className="absolute left-6 right-6 top-[20px] h-[4px] bg-slate-100 -z-10 rounded-full" />
              <div 
                className="absolute left-6 top-[20px] h-[4px] bg-gradient-to-r from-violet-500 to-fuchsia-500 -z-10 rounded-full transition-all duration-700 ease-out" 
                style={{ width: `${progressPercent}%` }} 
              />

              {steps.map((step, idx) => {
                const isActive = (currentStep === 'COMPLETED') || (idx <= currentIndex);
                const isCurrent = (currentStep !== 'COMPLETED') && (idx === currentIndex);
                return (
                  <div key={step.id} className="flex flex-col items-center gap-2 px-1 z-10">
                    <div className={`
                      w-11 h-11 rounded-full flex items-center justify-center transition-all duration-500 border-[3px]
                      ${isActive 
                        ? 'bg-white border-violet-500 text-violet-600 shadow-lg shadow-violet-200 scale-100' 
                        : 'bg-white border-slate-100 text-slate-300 scale-90'}
                      ${isCurrent ? 'ring-4 ring-violet-100 scale-110 !border-violet-600 !text-violet-700' : ''}
                    `}>
                      <step.icon className="w-5 h-5" strokeWidth={2.5} />
                    </div>
                    <span className={`text-[10px] font-bold transition-colors duration-300 uppercase tracking-wide ${isActive ? 'text-violet-600' : 'text-slate-300'}`}>
                      {step.label}
                    </span>
                  </div>
                );
              })}
            </div>
          );
        };

        const ActiveOrderFlow = ({ order, onBack, onNextStep }) => {
          const [loading, setLoading] = useState(false);
          const [copied, setCopied] = useState(false);
          const [paymentData, setPaymentData] = useState({ sum: '', phone: '' });

          useEffect(() => {
            try { window.scrollTo({ top: 0, behavior: 'smooth' }); } catch(e) {}
          }, [order.status]);

          const handleAction = () => {
            if (order.status === 'PAYMENT_DATA') {
              if (!paymentData.sum || !paymentData.phone) {
                return;
              }
            }
            setLoading(true);
            setTimeout(() => {
              setLoading(false);
              onNextStep();
            }, 1200);
          };

          const handleCopy = (text) => {
            copyToClipboard(text);
            setCopied(true);
            setTimeout(() => setCopied(false), 2000);
          };

          const renderStepContent = () => {
            switch (order.status) {
              case 'SEARCHING':
                return (
                  <div className="space-y-6 animate-slideUp">
                    <div className="bg-amber-50 p-5 rounded-[24px] border border-amber-100/50 flex gap-4 text-amber-900/80 text-sm mb-2 shadow-sm">
                        <div className="bg-amber-100 p-2 rounded-xl h-fit">
                           <AlertTriangle className="w-5 h-5 flex-shrink-0 text-amber-600" />
                        </div>
                        <p className="font-medium text-xs leading-relaxed py-1">{WARNING_MSG}</p>
                    </div>

                    <div className="bg-white/70 backdrop-blur-md p-6 rounded-[32px] shadow-[0_8px_30px_rgb(0,0,0,0.04)] border border-white relative overflow-hidden group hover:shadow-[0_8px_30px_rgb(99,102,241,0.1)] transition-shadow duration-500">
                        <div className="absolute -top-10 -right-10 w-40 h-40 bg-violet-100 rounded-full blur-3xl opacity-50 pointer-events-none" />
                        <div className="absolute -bottom-10 -left-10 w-40 h-40 bg-fuchsia-100 rounded-full blur-3xl opacity-50 pointer-events-none" />
                        
                      <h2 className="text-2xl font-extrabold text-slate-800 mb-4 relative z-10">–ù–∞–π–¥–∏—Ç–µ —Ç–æ–≤–∞—Ä</h2>
                      
                      <div className="mb-6 relative z-10 text-sm text-slate-600 space-y-3 bg-slate-50/80 p-5 rounded-[24px] border border-slate-100">
                          <div className="flex items-center gap-3">
                             <span className="w-6 h-6 rounded-full bg-violet-100 text-violet-600 flex items-center justify-center text-xs font-bold">1</span>
                             <p>WB –ü–æ–∏—Å–∫: <b className="text-slate-900">{order.product.keyword}</b></p>
                          </div>
                          <div className="flex items-center gap-3">
                             <span className="w-6 h-6 rounded-full bg-violet-100 text-violet-600 flex items-center justify-center text-xs font-bold">2</span>
                             <p>–ë—Ä–µ–Ω–¥: <b className="text-slate-900">{order.product.brand}</b></p>
                          </div>
                          <div className="pl-9 text-xs text-slate-500 italic leading-relaxed border-l-2 border-violet-100 ml-3">{order.product.action}</div>
                      </div>
                      
                      <div 
                        onClick={() => handleCopy(order.product.keyword)}
                        className="bg-white p-4 rounded-[24px] flex items-center justify-between border-2 border-dashed border-indigo-100 active:border-indigo-400 transition-all cursor-pointer mb-2 group shadow-sm hover:shadow-md"
                      >
                        <div className="pl-2">
                           <p className="text-[10px] text-slate-400 font-bold uppercase tracking-wider mb-1">–ù–∞–∂–º–∏—Ç–µ —á—Ç–æ–±—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</p>
                           <p className="text-lg font-bold text-slate-800 group-hover:text-violet-600 transition-colors">{order.product.keyword}</p>
                        </div>
                        <div className={`p-3 rounded-2xl transition-all duration-300 ${copied ? 'bg-green-500 text-white scale-110 shadow-lg shadow-green-200' : 'bg-slate-50 text-slate-400 group-hover:bg-violet-50 group-hover:text-violet-500'}`}>
                          {copied ? <CheckCircle className="w-6 h-6" /> : <Copy className="w-6 h-6" />}
                        </div>
                      </div>
                    </div>

                    <div className="bg-white/70 backdrop-blur-md p-6 rounded-[32px] shadow-[0_8px_30px_rgb(0,0,0,0.04)] border border-white">
                        <h3 className="text-sm font-bold text-slate-800 mb-4 flex items-center uppercase tracking-wide opacity-70 ml-2">
                          –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
                        </h3>
                        <FileUploader label="–°–∫—Ä–∏–Ω—à–æ—Ç –∑–∞–∫–∞–∑–∞ (–û–ø–ª–∞—Ç–∞)" onUpload={() => {}} isLoading={loading} />
                    </div>

                    <button onClick={handleAction} disabled={loading} className={MAIN_BTN_CLASS}>
                      {loading ? <><Loader className="w-5 h-5 mr-2 animate-spin"/> –ü—Ä–æ–≤–µ—Ä—è–µ–º...</> : "–Ø –æ–ø–ª–∞—Ç–∏–ª (–°–∫—Ä–∏–Ω)"}
                    </button>
                  </div>
                );

              case 'WAITING_PICKUP':
                return (
                  <div className="space-y-6 text-center pt-8 animate-slideUp">
                      <div className="relative inline-block mb-6">
                        <div className="w-32 h-32 bg-gradient-to-tr from-orange-100 to-amber-50 rounded-full flex items-center justify-center mx-auto animate-pulse-slow shadow-xl shadow-orange-100/50 ring-8 ring-white">
                           <MapPin className="w-14 h-14 text-orange-400 drop-shadow-sm" />
                        </div>
                        <div className="absolute -bottom-2 -right-2 bg-white p-3 rounded-2xl shadow-lg border border-slate-50">
                           <Clock className="w-6 h-6 text-orange-400" />
                        </div>
                      </div>
                      
                      <div>
                        <h2 className="text-3xl font-extrabold text-slate-800 mb-2">–¢–æ–≤–∞—Ä –≤ –ø—É—Ç–∏</h2>
                        <p className="text-slate-500 text-sm mt-3 max-w-[280px] mx-auto leading-relaxed font-medium">
                          –ö–∞–∫ –∑–∞–±–µ—Ä–µ—Ç–µ —Ç–æ–≤–∞—Ä –∏–∑ –ü–í–ó ‚Äî —Å–¥–µ–ª–∞–π—Ç–µ —Ñ–æ—Ç–æ –∫–æ—Ä–æ–±–∫–∏ –∏ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É.
                        </p>
                      </div>

                      <div className="bg-white/80 backdrop-blur-md p-6 rounded-[32px] shadow-[0_8px_30px_rgb(0,0,0,0.04)] border border-white text-left mt-8">
                        <h3 className="text-sm font-bold text-slate-800 mb-4 uppercase tracking-wide opacity-70 ml-2">–§–æ—Ç–æ —Ç–æ–≤–∞—Ä–∞</h3>
                        <FileUploader label="–§–æ—Ç–æ —Ç–æ–≤–∞—Ä–∞ –∏–∑ –ü–í–ó" onUpload={() => {}} isLoading={loading} icon={Camera} />
                      </div>

                      <button onClick={handleAction} disabled={loading} className={MAIN_BTN_CLASS}>
                        {loading ? <><Loader className="w-5 h-5 mr-2 animate-spin"/> –ó–∞–≥—Ä—É–∑–∫–∞...</> : "–Ø –∑–∞–±—Ä–∞–ª —Ç–æ–≤–∞—Ä (–°–∫—Ä–∏–Ω)"}
                      </button>
                  </div>
                );

              case 'DRAFT_MODE':
                return (
                    <div className="space-y-5 animate-slideUp">
                      <div className="bg-white/80 backdrop-blur-md p-7 rounded-[32px] shadow-[0_8px_30px_rgb(0,0,0,0.04)] border border-white relative">
                          <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-violet-400 to-fuchsia-400 opacity-50" />
                         <h2 className="font-extrabold text-slate-800 text-xl mb-1">–í–∞—à –æ—Ç–∑—ã–≤</h2>
                         <p className="text-xs text-slate-400 font-medium mb-6">–ú—ã –ø—Ä–æ–≤–µ—Ä–∏–º —Ç–µ–∫—Å—Ç –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π</p>
                         
                         <div className="space-y-6">
                           <div>
                             <label className="block text-xs font-bold text-slate-400 mb-3 ml-2 uppercase tracking-wider">1. –¢–µ–∫—Å—Ç –æ—Ç–∑—ã–≤–∞</label>
                             <textarea 
                               className="w-full p-5 bg-slate-50 border-2 border-transparent rounded-[24px] focus:bg-white focus:border-violet-300 focus:shadow-xl focus:shadow-violet-100 outline-none text-sm min-h-[140px] transition-all placeholder:text-slate-300 resize-none font-medium text-slate-700"
                               placeholder="–¢–æ–≤–∞—Ä –æ—Ç–ª–∏—á–Ω—ã–π, –¥–µ—Ç—è–º –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å..."
                             />
                           </div>
                           
                           <div>
                             <label className="block text-xs font-bold text-slate-400 mb-3 ml-2 uppercase tracking-wider">2. –§–æ—Ç–æ/–í–∏–¥–µ–æ</label>
                             <div className="grid grid-cols-2 gap-3">
                               <FileUploader label="–§–æ—Ç–æ" onUpload={()=>{}} />
                               <FileUploader label="–í–∏–¥–µ–æ (–æ–ø—Ü)" onUpload={()=>{}} />
                             </div>
                           </div>
                         </div>
                      </div>

                      <button onClick={handleAction} disabled={loading} className={MAIN_BTN_CLASS}>
                          {loading ? <><Loader className="w-5 h-5 mr-2 animate-spin"/> –û—Ç–ø—Ä–∞–≤–ª—è–µ–º...</> : "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã"}
                      </button>
                    </div>
                );

              case 'POSTING_REVIEW':
                return (
                  <div className="space-y-6 pt-4 animate-slideUp">
                      <div className="bg-gradient-to-br from-amber-50 to-orange-50 p-8 rounded-[32px] border border-amber-100 text-center relative overflow-hidden shadow-sm">
                        <div className="absolute top-0 right-0 w-32 h-32 bg-amber-100 rounded-full blur-3xl opacity-60 pointer-events-none" />
                        
                        <div className="relative z-10">
                          <div className="w-20 h-20 bg-white rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg shadow-amber-100">
                            <Star className="w-10 h-10 text-amber-400 fill-amber-400 animate-bounce-short" />
                          </div>
                          <h3 className="text-2xl font-extrabold text-slate-800">–¢–µ–∫—Å—Ç —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω!</h3>
                          <p className="text-sm text-slate-600 mt-2 mb-6 font-medium">–û–ø—É–±–ª–∏–∫—É–π—Ç–µ –æ—Ç–∑—ã–≤ –Ω–∞ Wildberries –∏ –ø—Ä–∏—à–ª–∏—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç.</p>
                          
                          <div className="bg-white/60 backdrop-blur-md p-5 rounded-[24px] text-left border border-white/60 shadow-sm relative group cursor-pointer hover:bg-white transition-colors" onClick={() => handleCopy("–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –æ—Ç–∑—ã–≤–∞...")}>
                            <p className="text-sm text-slate-600 italic pr-8 line-clamp-2 leading-relaxed">"–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –æ—Ç–∑—ã–≤–∞ –±—É–¥–µ—Ç –∑–¥–µ—Å—å..."</p>
                            <div className="absolute right-3 top-3 p-2 bg-white rounded-xl text-amber-500 shadow-sm">
                               <Copy className="w-4 h-4"/>
                            </div>
                          </div>
                        </div>
                      </div>

                      <div className="bg-white/80 backdrop-blur-md p-6 rounded-[32px] shadow-[0_8px_30px_rgb(0,0,0,0.04)] border border-white">
                        <h3 className="text-sm font-bold text-slate-800 mb-4 uppercase tracking-wide opacity-70 ml-2">–°–∫—Ä–∏–Ω—à–æ—Ç –æ—Ç–∑—ã–≤–∞</h3>
                        <FileUploader label="–°–∫—Ä–∏–Ω—à–æ—Ç —Å WB" onUpload={() => {}} icon={Upload} />
                      </div>

                      <button onClick={handleAction} disabled={loading} className={MAIN_BTN_CLASS}>
                        {loading ? <><Loader className="w-5 h-5 mr-2 animate-spin"/> –ü—Ä–æ–≤–µ—Ä—è–µ–º...</> : "–Ø –æ–ø—É–±–ª–∏–∫–æ–≤–∞–ª (–°–∫—Ä–∏–Ω)"}
                      </button>
                  </div>
                );
              
              case 'PAYMENT_DATA':
                return (
                  <div className="space-y-6 pt-4 animate-slideUp">
                      <div className="bg-rose-50 p-6 rounded-[32px] border border-rose-100 text-center relative overflow-hidden">
                          <div className="w-16 h-16 bg-white rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg shadow-rose-100 rotate-3">
                             <ShieldCheck className="w-8 h-8 text-rose-500" />
                          </div>
                          <h3 className="text-rose-950 font-extrabold mb-2 text-lg">–í–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è!</h3>
                          <p className="text-sm text-rose-800/80 leading-relaxed font-medium">
                            –ú—ã –ù–ï –ø–µ—Ä–µ–≤–æ–¥–∏–º –¥–µ–Ω—å–≥–∏ –Ω–∞ –∫–∞—Ä—Ç—É.<br/>
                            –í–æ–∑–≤—Ä–∞—Ç —á–µ—Ä–µ–∑ <b className="text-rose-600">—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç WB</b> –Ω–∞ 15-–π –¥–µ–Ω—å.
                          </p>
                      </div>

                      <div className="bg-white/80 backdrop-blur-md p-7 rounded-[32px] shadow-[0_8px_30px_rgb(0,0,0,0.04)] border border-white space-y-6">
                        <h3 className="text-xl font-extrabold text-slate-800">–†–µ–∫–≤–∏–∑–∏—Ç—ã</h3>
                        
                        <div className="space-y-4">
                          <div className="group">
                            <label className="block text-[10px] font-extrabold text-slate-400 uppercase mb-2 ml-4 tracking-widest group-focus-within:text-violet-500 transition-colors">–°—É–º–º–∞ –≤—ã–∫—É–ø–∞ (‚ÇΩ)</label>
                            <input 
                              type="number" 
                              value={paymentData.sum}
                              onChange={(e) => setPaymentData({...paymentData, sum: e.target.value})}
                              placeholder="745"
                              className="w-full p-5 bg-slate-50 rounded-[24px] border-2 border-transparent focus:bg-white focus:border-violet-300 focus:shadow-xl focus:shadow-violet-100 outline-none font-bold text-xl text-slate-800 transition-all placeholder:text-slate-300 placeholder:font-normal"
                            />
                          </div>

                          <div className="group">
                            <label className="block text-[10px] font-extrabold text-slate-400 uppercase mb-2 ml-4 tracking-widest group-focus-within:text-violet-500 transition-colors">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</label>
                            <input 
                              type="tel" 
                              value={paymentData.phone}
                              onChange={(e) => setPaymentData({...paymentData, phone: e.target.value})}
                              placeholder="89001234567"
                              className="w-full p-5 bg-slate-50 rounded-[24px] border-2 border-transparent focus:bg-white focus:border-violet-300 focus:shadow-xl focus:shadow-violet-100 outline-none font-bold text-xl text-slate-800 transition-all placeholder:text-slate-300 placeholder:font-normal"
                            />
                          </div>
                        </div>
                      </div>

                      <button onClick={handleAction} disabled={loading} className={MAIN_BTN_CLASS}>
                        {loading ? <><Loader className="w-5 h-5 mr-2 animate-spin"/> –û—Ç–ø—Ä–∞–≤–ª—è–µ–º...</> : "–ü–æ–ª—É—á–∏—Ç—å CashBack"}
                      </button>
                  </div>
                );

              case 'COMPLETED':
                return (
                  <div className="flex flex-col items-center justify-center min-h-[60vh] text-center space-y-8 animate-scaleIn pt-10">
                    <div className="relative">
                      <div className="absolute inset-0 bg-emerald-200 blur-3xl opacity-30 rounded-full animate-pulse-slow"></div>
                      <div className="w-40 h-40 bg-gradient-to-tr from-emerald-50 to-teal-50 rounded-full flex items-center justify-center mx-auto shadow-2xl shadow-emerald-100 border-4 border-white">
                          <Gift className="w-20 h-20 text-emerald-500 drop-shadow-sm" />
                      </div>
                      <div className="absolute -right-2 top-0 bg-amber-400 text-white p-3 rounded-full rotate-12 shadow-lg ring-4 ring-white">
                        <Star className="w-8 h-8 fill-current" />
                      </div>
                    </div>
                    
                    <div className="px-4">
                      <h2 className="text-4xl font-black text-slate-800 mb-4 tracking-tight">–ó–∞—è–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞!</h2>
                      <p className="text-slate-500 max-w-[280px] mx-auto leading-relaxed font-medium text-lg">
                        –û–∂–∏–¥–∞–π—Ç–µ –≤—ã–ø–ª–∞—Ç—É —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º –≤ —Ç–µ—á–µ–Ω–∏–µ 15 –¥–Ω–µ–π.
                      </p>
                    </div>

                    <div className="bg-white/80 backdrop-blur-xl px-10 py-6 rounded-[32px] shadow-xl shadow-slate-200/50 border border-white w-full max-w-xs mx-auto">
                        <p className="text-[10px] text-slate-400 uppercase font-bold tracking-widest mb-2">–î–∞—Ç–∞ –≤—ã–ø–ª–∞—Ç—ã</p>
                        <p className="text-3xl font-black text-slate-800 tracking-tight">15.01</p>
                    </div>
                    
                    <button onClick={onBack} className="text-violet-600 font-bold py-4 px-8 rounded-2xl hover:bg-violet-50 transition-colors w-full">
                      –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é
                    </button>
                  </div>
                );
              default: return null;
            }
          };

          return (
            <div className="bg-slate-50 min-h-screen pb-28 relative overflow-hidden">
              {/* –õ–∞–º–ø–æ–≤—ã–π —Ñ–æ–Ω —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–º–∏ –ø—è—Ç–Ω–∞–º–∏ */}
              <div className="fixed top-0 left-0 w-full h-full overflow-hidden -z-10 pointer-events-none">
                  <div className="absolute -top-[20%] -left-[10%] w-[70%] h-[50%] bg-violet-200/30 rounded-full blur-[100px]" />
                  <div className="absolute top-[30%] -right-[10%] w-[60%] h-[60%] bg-indigo-200/30 rounded-full blur-[100px]" />
                  <div className="absolute -bottom-[10%] left-[20%] w-[50%] h-[40%] bg-fuchsia-100/40 rounded-full blur-[100px]" />
              </div>

              <div className="bg-white/60 backdrop-blur-xl sticky top-0 z-30 px-6 py-4 shadow-sm border-b border-white/50 flex items-center justify-between">
                <button onClick={onBack} className="w-11 h-11 bg-white rounded-full flex items-center justify-center text-slate-500 shadow-sm border border-slate-100 hover:text-violet-600 hover:border-violet-200 transition-all active:scale-90">
                    <ChevronLeft className="w-6 h-6" />
                </button>
                <span className="font-bold text-slate-800 text-sm max-w-[200px] truncate">{order.product.name}</span>
                <div className="w-11" /> 
              </div>

              <div className="p-5 max-w-lg mx-auto pt-8">
                <StepIndicator currentStep={order.status} />
                {renderStepContent()}
              </div>
            </div>
          );
        };

        const App = () => {
          const [activeTab, setActiveTab] = useState('home');
          const [activeOrder, setActiveOrder] = useState(null);
          const [showPolicy, setShowPolicy] = useState(false);

          const startOrder = (product) => {
            setActiveOrder({ product, status: 'SEARCHING' });
            setActiveTab('orders');
          };

          const advanceOrder = () => {
            if (!activeOrder) return;
            const flow = ['SEARCHING', 'WAITING_PICKUP', 'DRAFT_MODE', 'POSTING_REVIEW', 'PAYMENT_DATA', 'COMPLETED'];
            const currentIndex = flow.indexOf(activeOrder.status);
            if (currentIndex < flow.length - 1) {
              setActiveOrder({ ...activeOrder, status: flow[currentIndex + 1] });
            }
          };

          const NavButton = ({ tab, icon: Icon, label }) => {
            const isActive = activeTab === tab;
            return (
              <button 
                onClick={() => setActiveTab(tab)}
                className={`flex flex-col items-center justify-center w-full h-full space-y-1 transition-all duration-300 group ${isActive ? 'text-violet-600' : 'text-slate-400 hover:text-slate-500'}`}
              >
                <div className={`relative p-2 rounded-2xl transition-all duration-500 ${isActive ? '-translate-y-3 bg-white shadow-lg shadow-indigo-100' : 'group-active:scale-90'}`}>
                    <Icon className={`w-6 h-6 ${isActive ? 'fill-violet-500 text-violet-600' : 'stroke-[2px]'}`} />
                    {tab === 'orders' && activeOrder && activeOrder.status !== 'COMPLETED' && (
                      <span className="absolute -top-1 -right-1 w-3.5 h-3.5 bg-rose-500 rounded-full border-[3px] border-white animate-pulse shadow-sm" />
                    )}
                </div>
                <span className={`text-[10px] font-bold ${isActive ? 'opacity-100 translate-y-[-8px]' : 'opacity-0 scale-0 h-0'} transition-all duration-300`}>
                  {label}
                </span>
              </button>
            );
          };

          const renderScreen = () => {
            if (showPolicy) {
               return (
                 <div className="p-6 pt-8 animate-fadeIn min-h-screen bg-slate-50/50 backdrop-blur-sm z-50">
                    <button onClick={() => setShowPolicy(false)} className="mb-8 flex items-center text-slate-500 font-bold bg-white px-4 py-2 rounded-2xl shadow-sm w-fit hover:text-violet-600 transition-colors">
                       <ChevronLeft className="w-5 h-5 mr-1"/> –ù–∞–∑–∞–¥
                    </button>
                    <h1 className="text-3xl font-black text-slate-800 mb-6 tracking-tight">–ü—Ä–∞–≤–∏–ª–∞ —Å–µ—Ä–≤–∏—Å–∞</h1>
                    <div className="bg-white p-8 rounded-[32px] shadow-sm border border-white/60">
                      <div className="prose text-sm text-slate-600 whitespace-pre-wrap leading-relaxed">
                          {POLICY_TEXT}
                          <br/><br/>
                          <div className="bg-rose-50 p-5 rounded-2xl border border-rose-100 text-rose-800 font-medium flex items-start gap-3">
                             <AlertTriangle className="w-5 h-5 flex-shrink-0 mt-0.5" />
                             {WARNING_MSG}
                          </div>
                      </div>
                    </div>
                 </div>
               )
            }

            if (activeTab === 'home') {
              return (
                <div className="p-5 pb-32 max-w-lg mx-auto animate-fadeIn">
                  <header className="mb-10 pt-6">
                    <div className="inline-block bg-white px-4 py-1.5 rounded-full text-xs font-bold text-violet-600 shadow-sm border border-violet-100 mb-4 tracking-wide">
                      BETA v1.0
                    </div>
                    <h1 className="text-4xl font-black text-slate-800 tracking-tight mb-2 leading-tight">
                      –¢–æ–≤–∞—Ä—ã <br/>
                      <span className="text-transparent bg-clip-text bg-gradient-to-r from-violet-600 to-indigo-600">–ë–µ—Å–ø–ª–∞—Ç–Ω–æ</span>
                    </h1>
                    <p className="text-slate-500 font-medium text-lg">–ó–∞–±–∏—Ä–∞–π —Ç–æ–≤–∞—Ä—ã –∑–∞ —á–µ—Å—Ç–Ω—ã–π –æ—Ç–∑—ã–≤</p>
                  </header>
                  
                  <div className="mb-6">
                      <div className="flex items-center justify-between mb-6">
                        <h2 className="text-xl font-bold text-slate-800 flex items-center">
                          üî• –ì–æ—Ä—è—á–µ–µ
                        </h2>
                        <div className="flex items-center text-xs font-bold text-slate-400 bg-white px-3 py-1 rounded-full shadow-sm">
                          <Clock className="w-3 h-3 mr-1" />
                          –û–±–Ω–æ–≤–ª–µ–Ω–æ 1—á –Ω–∞–∑–∞–¥
                        </div>
                      </div>
                      <div className="grid gap-2">
                        {PRODUCTS.map(p => (
                          <ProductCard key={p.id} product={p} onSelect={startOrder} />
                        ))}
                      </div>
                  </div>
                </div>
              );
            }

            if (activeTab === 'orders') {
              if (!activeOrder) return (
                 <div className="flex flex-col items-center justify-center min-h-[80vh] px-6 text-center animate-fadeIn">
                    <div className="relative">
                       <div className="absolute inset-0 bg-slate-200 blur-2xl opacity-40 rounded-full" />
                       <div className="w-32 h-32 bg-white rounded-[32px] flex items-center justify-center mb-8 relative shadow-xl shadow-slate-100 rotate-3 border border-white">
                         <ShoppingBag className="w-14 h-14 text-slate-300" strokeWidth={1.5} />
                       </div>
                    </div>
                    <h3 className="text-2xl font-black text-slate-800 mb-3 tracking-tight">–ü—É—Å—Ç–æ–≤–∞—Ç–æ...</h3>
                    <p className="text-slate-500 mb-10 max-w-[250px] leading-relaxed font-medium">
                      –í—ã –µ—â–µ –Ω–µ –≤–∑—è–ª–∏ –Ω–∏ –æ–¥–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞. –í—ã–±–µ—Ä–∏—Ç–µ —á—Ç–æ-–Ω–∏–±—É–¥—å –∫—Ä—É—Ç–æ–µ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ!
                    </p>
                    <button onClick={() => setActiveTab('home')} className="bg-slate-900 text-white px-8 py-4 rounded-[20px] font-bold shadow-xl shadow-slate-200 active:scale-95 transition-all hover:bg-violet-600 hover:shadow-violet-200">
                      –ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥
                    </button>
                 </div>
              );
              return <ActiveOrderFlow order={activeOrder} onBack={() => setActiveTab('home')} onNextStep={advanceOrder} />;
            }

            if (activeTab === 'profile') {
              return (
                <div className="p-6 max-w-lg mx-auto animate-fadeIn">
                  <div className="flex items-center gap-6 mb-10 pt-8">
                    <div className="w-24 h-24 bg-gradient-to-tr from-violet-500 to-fuchsia-500 rounded-[32px] flex items-center justify-center text-4xl text-white font-black shadow-2xl shadow-violet-200 border-4 border-white rotate-3">
                       U
                    </div>
                    <div>
                      <h2 className="text-3xl font-black text-slate-800 tracking-tight">User</h2>
                      <div className="inline-flex items-center mt-2 px-3 py-1 bg-white rounded-lg text-xs font-bold text-slate-500 shadow-sm border border-slate-100">
                          <span className="w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse" />
                          Online
                      </div>
                    </div>
                  </div>

                  <div className="bg-white/70 backdrop-blur-md p-1 rounded-[36px] border border-white shadow-sm space-y-1">
                        <button className="w-full bg-white p-5 rounded-[32px] flex items-center justify-between shadow-sm active:scale-[0.98] transition-all hover:bg-violet-50 group border border-transparent hover:border-violet-100">
                          <div className="flex items-center gap-4">
                             <div className="w-12 h-12 rounded-2xl bg-indigo-50 text-indigo-500 flex items-center justify-center group-hover:bg-indigo-100 transition-colors">
                                <Clock className="w-6 h-6" />
                             </div>
                             <span className="font-bold text-slate-700 text-lg group-hover:text-indigo-600 transition-colors">–ò—Å—Ç–æ—Ä–∏—è</span>
                          </div>
                          <ChevronRight className="w-6 h-6 text-slate-300 group-hover:text-indigo-400" />
                        </button>

                        <button className="w-full bg-white p-5 rounded-[32px] flex items-center justify-between shadow-sm active:scale-[0.98] transition-all hover:bg-violet-50 group border border-transparent hover:border-violet-100">
                          <div className="flex items-center gap-4">
                             <div className="w-12 h-12 rounded-2xl bg-emerald-50 text-emerald-500 flex items-center justify-center group-hover:bg-emerald-100 transition-colors">
                                <User className="w-6 h-6" />
                             </div>
                             <div className="text-left">
                                <span className="font-bold text-slate-700 text-lg block group-hover:text-emerald-600 transition-colors">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</span>
                                <span className="text-xs text-slate-400 font-medium">@TopSith</span>
                             </div>
                          </div>
                          <ChevronRight className="w-6 h-6 text-slate-300 group-hover:text-emerald-400" />
                        </button>

                        <button onClick={() => setShowPolicy(true)} className="w-full bg-white p-5 rounded-[32px] flex items-center justify-between shadow-sm active:scale-[0.98] transition-all hover:bg-violet-50 group border border-transparent hover:border-violet-100">
                          <div className="flex items-center gap-4">
                             <div className="w-12 h-12 rounded-2xl bg-rose-50 text-rose-500 flex items-center justify-center group-hover:bg-rose-100 transition-colors">
                                <ShieldCheck className="w-6 h-6" />
                             </div>
                             <span className="font-bold text-slate-700 text-lg group-hover:text-rose-600 transition-colors">–ü—Ä–∞–≤–∏–ª–∞</span>
                          </div>
                          <ChevronRight className="w-6 h-6 text-slate-300 group-hover:text-rose-400" />
                        </button>
                  </div>
                </div>
              );
            }
          };

          return (
            <div className="bg-slate-50 min-h-screen pb-28 relative overflow-hidden">
              {/* Background Blobs */}
              <div className="fixed top-0 left-0 w-full h-full overflow-hidden -z-10 pointer-events-none">
                  <div className="absolute -top-[20%] -left-[10%] w-[70%] h-[50%] bg-violet-200/30 rounded-full blur-[100px]" />
                  <div className="absolute top-[30%] -right-[10%] w-[60%] h-[60%] bg-indigo-200/30 rounded-full blur-[100px]" />
                  <div className="absolute -bottom-[10%] left-[20%] w-[50%] h-[40%] bg-fuchsia-100/40 rounded-full blur-[100px]" />
              </div>

              {/* –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */}
              {renderScreen()}

              {/* –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è (—Å–∫—Ä—ã–≤–∞–µ–º –µ—Å–ª–∏ –∞–∫—Ç–∏–≤–µ–Ω –∑–∞–∫–∞–∑ –∏–ª–∏ –ø–æ–ª–∏—Ç–∏–∫–∞) */}
              {(!activeOrder || activeTab !== 'orders') && !showPolicy && (
                <div className="fixed bottom-0 inset-x-0 bg-white/70 backdrop-blur-xl border-t border-white/50 pb-safe h-[96px] px-8 flex justify-between items-start pt-2 z-50 shadow-[0_-10px_40px_rgba(0,0,0,0.03)] rounded-t-[40px]">
                  <NavButton tab="home" icon={Home} label="–ì–ª–∞–≤–Ω–∞—è" />
                  <NavButton tab="orders" icon={ShoppingBag} label="–ó–∞–∫–∞–∑—ã" />
                  <NavButton tab="profile" icon={User} label="–ü—Ä–æ—Ñ–∏–ª—å" />
                </div>
              )}
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
